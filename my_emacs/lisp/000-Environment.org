* Environment

#+begin_src emacs-lisp
;;* Environment

(leuven--chapter leuven-load-chapter-0-environment "0 Environment"

;;** Type of OS

  (leuven--section "Type of OS")

  (defconst leuven--linux-p (eq system-type 'gnu/linux)
    "Running Emacs on Linux or WSL.")

  (defconst leuven--mac-p (eq system-type 'darwin)
    "Running Emacs on macOS.")

  (defconst leuven--win32-p (eq system-type 'windows-nt)
    "Running Emacs on native Microsoft Windows.")

  (defconst leuven--cygwin-p (eq system-type 'cygwin)
    "Running Emacs on Cygwin.")

;;** MS Windows

  (defconst leuven--windows-program-files-dir
    (cond
      (leuven--win32-p (file-name-as-directory (getenv "ProgramFiles(x86)")))
      (leuven--cygwin-p "/cygdrive/c/Program Files (x86)/")
      (t "/usr/local/bin/"))
    "Default Windows Program Files folder.")
#+end_src

Use ~(display-graphic-p)~ (instead of ~window-system~) in conditions.

#+begin_src emacs-lisp
;;** Window system

  (leuven--section "Window system")

  (defconst leuven--console-p
    (not window-system)
    "Running a text-only terminal.")

  (defconst leuven--x-window-p
    (eq window-system 'x)
    "Running an X Window system.")

;;** Testing file accessibility

  (defun leuven--file-exists-and-executable-p (file)
    "Make sure the file FILE exists and is executable."
    (if file
        (if (file-executable-p file)
            file
          (message "[WARN- Can't find executable `%s']" file)
          ;; Sleep 1.5 s so that you can see the warning.
          (sit-for 1.5))
      (error "Missing argument to \"leuven--file-exists-and-executable-p\"")))

;;** Init

  (leuven--section "Init")

  ;; Ensure that the echo area is always visible during the early stage of
  ;; startup (useful in case of error).
  (modify-all-frames-parameters
   '((height . 32)))

)                                       ; Chapter 0 ends here.
#+end_src

*************** TODO Function for finding executables
See function ~--find-program~ at http://www.visualco.de/src/elisp/.emacs.el.html.
*************** END

